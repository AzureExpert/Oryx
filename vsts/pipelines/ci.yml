resources:
- repo: self
jobs:
- job: Job_SecurityCheck
  displayName: Security
  condition: succeeded()
  pool:
    name: Hosted VS2017
  steps:
  - template: _securityChecks.yml

- job: Job_SignBinaries
  displayName: Build and Sign Oryx Binaries
  condition: succeeded()
  pool:
    name: VSEng-MicroBuildVS2017
    demands:
    - msbuild
    - visualstudio
  variables:
    SignType: 'test'
  steps:
  - template: _signbinary.yml

- job: Job_BuildTestPushImages
  displayName: Build and Test Oryx Images and Push to image registry
  dependsOn: Job_SignBinaries
  condition: succeeded()
  template: _integration.yml
  parameters:
      isCIBuild: 'true'

trigger: none